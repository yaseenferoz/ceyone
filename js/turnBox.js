!function(e){function r(e){var r=t(e,"turnBoxType"),r=o(r),n=t(e,"turnBoxDirection"),n=o(n),a=e.children(".turnBoxFaceNum1").css("height"),i=e.children(".turnBoxFaceNum2").css("height"),s=e.children(".turnBoxFaceNum1").css("width"),u=e.children(".turnBoxFaceNum2").css("width");if(a==i&&s==u)var x=!0;else if(a!==i||s!==u)var x=!1;var c={face_pcs:e.children().length,current_num:parseInt(t(e,"turnBoxCurrentFace")),duration:1e3*parseFloat(e.css("transition-duration")),delay:1e3*parseFloat(e.css("transition-delay")),type:r,fixed:x,direction:n};return c}function n(e){var r=e,r=r.replace(/ \./g,"--"),r=r.replace(/ \#/g,"-_"),r=r.replace(/ /g,""),r=r.replace(/\./g,"-"),r=r.replace(/\#/g,"_");return r}function t(e,r){var n=e.attr("class"),t=r.length,a=n.indexOf(r),i=e.attr("class").slice(a+t),o=i.indexOf(" ");if(-1!==o)var s=i.slice(0,o);else var s=i;return s}function a(e){var r=e.slice(0,1).toUpperCase(),n=e.slice(1),e=r+n;return e}function o(e){var r=e.slice(0,1).toLowerCase(),n=e.slice(1),e=r+n;return e}function s(r,i,o,s,x,c,f,p,v){e.each(i,function(){var i=e(this),l=["click","mouseover","mouseup","mousedown","mousemove","mouseout","touchstart","touchmove","touchend"],d="";0==v?e(this).attr("class").indexOf("turnBoxButtonEvent")>-1?e.each(l,function(){var e=this;i.attr("class").indexOf("turnBoxButtonEvent"+a(e))>-1&&(d=d+" "+e)}):d+="click":d=v.events,i.on(d,function(){if(i.attr("class").indexOf("turnBoxButtonFor-")>-1)var a=new RegExp("(turnBoxButtonFor-)([^ ]*)","gi"),l=a.exec(i.attr("class"))[2];else var l=n(e(r).selector);if(0==v)var d=e(this).closest(".turnBoxContainer");else var d=r;var B=parseInt(t(d,"turnBoxCurrentFace"));if(0==v)if("skip"==x&&e(this).attr("class").indexOf("turnBoxButtonTo")>-1)var h=parseInt(t(e(this),"turnBoxButtonTo"));else if(1==e(this).hasClass("turnBoxButtonPrev"))var h=B-1;else var h=B+1;else if("skip"==x&&1==e.isNumeric(v.dist))var h=v.dist;else if("prev"==v.dist)var h=B-1;else var h=B+1;(n(e(r).selector)==l||v!==!1)&&u(d,B,h,o,s,x,c,f,p)})})}function u(e,r,n,t,a,i,o,s,u,x){if(r==n)return!1;var c=e.children().hasClass("turnBoxTransition"),o=e.children().length,f=t+a,p=20;return"real"!==i&&(5==n&&(n=1),4==o&&0==n&&(n=o)),4!==o&&n>o||4!==o&&1>n?!1:void((0==c||1==c&&void 0!==x)&&(0==s&&"real"==i&&("negative"==u?(0==r&&5==n||1==r&&2==n||2==r&&1==n||3==r&&4==n||4==r&&3==n||5==r&&0==n)&&e.addClass("turnBoxAdjust"):(0==r&&1==n||1==r&&0==n||2==r&&3==n||3==r&&2==n||4==r&&5==n||5==r&&4==n)&&e.addClass("turnBoxAdjust"),setTimeout(function(){e.removeClass("turnBoxAdjust")},f+p+20)),setTimeout(function(){var t="turnBoxCurrentFace"+r.toFixed(),a="turnBoxCurrentFace"+n.toFixed(),i="turnBoxFaceNum"+r.toFixed(),o="turnBoxFaceNum"+n.toFixed();if(0==n)var i="turnBoxFaceNum1",o="turnBoxFaceNum4";if(5==n)var i="turnBoxFaceNum4",o="turnBoxFaceNum1";(1==x||void 0==x)&&e.find(".turnBoxFace").addClass("turnBoxTransition"),e.children("."+o).addClass("turnBoxShow"),e.addClass(a).removeClass(t),setTimeout(function(){e.find(".turnBoxFace").removeClass("turnBoxTransition"),e.children("."+i).removeClass("turnBoxShow"),0==n&&e.addClass("turnBoxCurrentFace4").removeClass("turnBoxCurrentFace0"),5==n&&e.addClass("turnBoxCurrentFace1").removeClass("turnBoxCurrentFace5")},f)},p)))}e.fn.turnBox=function(r){function o(r,t){var a=n(r.selector),i="turnBoxStyle-"+a,o='<style id="%style_id%">\n%css_code%\n</style>',s=o.replace(/%style_id%/g,i);s=s.replace(/%css_code%/g,t),null!=document.getElementById(i)&&e("#"+i).remove(),e("head").append(s)}function u(){var e=["-webkit-","-moz-","-ms-","-o-",""];return e}function x(){var r=u(),n="";return e.each(r,function(){n=n+" "+this+"perspective: "+w+"px;\n"}),n}function c(r){var n=u(),t="";return e.each(n,function(){if("each_face"==r)var n=[this+"transform","z-index","background"];else if("background"==r)var n=["background"];else var n=["all"];var a="";e.each(n,function(e){var r=", ";if(this==n[0])var r="";a=a+r+this+" "+k+"ms "+b+" "+T+"ms"}),t=t+" "+this+"transition: "+a+";\n"}),t}function f(r){var n=u(),t="";return e.each(n,function(){t=t+" "+this+"transform-origin: "+r+";\n"}),t}function p(r,n,t){if(void 0!==t)var a=d(r,n);else if(0==M)var a=l(r,n);else var a=v(r);var i=u(),o="";return e.each(i,function(){o=o+" "+this+"transform: rotate"+A+"("+r+"deg) translate3d("+a+");\n"}),o}function v(e){var r=E;if(0>e&&(r=-E),0==e||360==e||-360==e)var n="0px, 0px, 0px";if("Y"==A){if(90==e||-90==e)var n=r/2+"px, 0px, "+E/2+"px";else if(180==e||-180==e)var n="0px, 0px, "+E+"px";else if(270==e||-270==e)var n=r/2+"px, 0px, "+E/2+"px"}else if(90==e||-90==e)var n="0px, "+-r/2+"px, "+E/2+"px";else if(180==e||-180==e)var n="0px, 0px, "+E+"px";else if(270==e||-270==e)var n="0px, "+r/2+"px, "+E/2+"px";return n}function l(e,r){var n=E;if(0>e&&(n=-1*E),0==e||360==e||-360==e)var t="0px, 0px, 0px";if("Y"==A){if(1==r||3==r||5==r)if(90==e||-270==e)var t=_+"px, 0px, 0px";else if(180==e||-180==e)var t=2*_-E+"px, 0px, "+_+"px";else if(270==e||-90==e)var t=_-E+"px, 0px, "+_+"px";if(0==r||2==r||4==r)if(90==e||-270==e)var t=_+"px, 0px, "+-(_-E)+"px";else if(180==e||-180==e)var t=_+"px, 0px, "+E+"px";else if(270==e||-90==e)var t="0px, 0px, "+_+"px"}else{if(1==r||3==r||5==r)if(90==e||-270==e)var t="0px, "+(_-E)+"px, "+_+"px";else if(180==e||-180==e)var t="0px, "+(2*_-E)+"px, "+_+"px";else if(270==e||-90==e)var t="0px, "+_+"px, 0px";if(0==r||2==r||4==r)if(90==e||-270==e)var t="0px, 0px, "+_+"px";else if(180==e||-180==e)var t="0px, "+_+"px, "+E+"px";else if(270==e||-90==e)var t="0px, "+_+"px, "+-(_-E)+"px"}return t}function d(e,r){var n=E;if(0>e&&(n=-1*E),0==e||360==e||-360==e)var t="0px, 0px, 0px";if("Y"==A){if(1==r||3==r||5==r)if(90==e||-270==e)var t="0px, 0px, "+_+"px";else if(180==e||-180==e)var t=-E+"px, 0px, "+_+"px";else if(270==e||-90==e)var t=-E+"px, 0px, 0px";if(0==r||2==r||4==r)if(90==e||-270==e)var t="0px, 0px, "+E+"px";else if(180==e||-180==e)var t=-_+"px, 0px, "+E+"px";else if(270==e||-90==e)var t=-_+"px, 0px, 0px"}else{if(1==r||3==r||5==r)if(90==e||-270==e)var t="0px, "+-E+"px, 0px";else if(180==e||-180==e)var t="0px, "+-E+"px, "+_+"px";else if(270==e||-90==e)var t="0px, 0px, "+_+"px";if(0==r||2==r||4==r)if(90==e||-270==e)var t="0px, "+-_+"px, 0px";else if(180==e||-180==e)var t="0px, "+-_+"px, "+E+"px";else if(270==e||-90==e)var t="0px, 0px, "+E+"px"}return t}function B(){var r=n(g.selector);e.each(g,function(){var n=e(this),t=a(j),o=a(O);if(1==n.hasClass("turnBoxContainer"))return!1;for(n.children(":gt(3)").remove(),n.addClass("turnBoxContainer  turnBoxName-"+r+" turnBoxType"+t+" turnBoxDirection"+o+" turnBoxCurrentFace1"),i=0;i<Y;i++){var s=i+1,u=e(n.children()[i]);u.addClass("turnBoxFace turnBoxFaceNum"+s),1==s&&u.addClass("turnBoxShow")}})}function h(){var r=e(g).find(".turnBoxButton"),a=n(e(g).selector),i="turnBoxButtonFor-"+a;return void 0!==r.attr("class")?(e.each(r,function(){var r=e(this);if(r.attr("class").indexOf("turnBoxButtonFor-")>-1){var n=new RegExp("(turnBoxButtonFor-)([^ ]*)","gi"),o=n.exec(r.attr("class")),s=t(r.closest(".turnBoxContainer"),"turnBoxName-");s==a&&(r.removeClass(o[0]),r.addClass(i))}else r.addClass(i)}),i):void 0}function m(){var r=g.selector,n=1;if(4==Y){Y=6;var n=0}else Y+=1;if("Y"==A)var t="width",a=y;else var t="height",a=N;var s="";if(0==M){if("Y"==A)var u=_+"px 50%",v=" left: "+-(_-a)/2+"px;\n",s="\n"+r+".turnBoxAdjust > .turnBoxFace {\n"+f("0px 50%")+"}\n";else var u="50% "+_+"px",v=" height: "+_+"px;\n",s="\n"+r+".turnBoxAdjust > .turnBoxFace {\n"+f("50% 0px")+"}\n";var l=r+".turnBoxCurrentFace0, "+r+".turnBoxCurrentFace2, "+r+".turnBoxCurrentFace4 {\n"+v+"}\n\n"+r+" > .turnBoxFaceNum1, "+r+" > .turnBoxFaceNum3, "+r+" > .turnBoxFaceNum5 {\n "+t+": "+a+"px;\n}\n\n"+r+" > .turnBoxFaceNum0, "+r+" > .turnBoxFaceNum2, "+r+" > .turnBoxFaceNum4 {\n "+t+": "+_+"px;\n}\n"}else var l="",u="50% 50%";var d=r+" {\n"+c("box")+x()+" display: block;\n position: relative;\n width: "+y+"px;\n height: "+N+"px;\n left: 0;\n}\n"+s,B=r+" > .turnBoxFace {\n"+f(u)+" position: absolute;\n width: 100%;\n height: 100%;\n top: 0;\n left: 0;\n opacity: 0;\n}\n\n"+r+" > .turnBoxShow {\n opacity: 1;\n}\n\n"+r+" > .turnBoxTransition {\n"+c("each_face")+"}\n",h="",m="";for(i=n;i<Y;i++){var F=i,C=r+".turnBoxCurrentFace"+F;e.each(g,function(){face_arry=e(this).children(".turnBoxFace")}),e.each(face_arry,function(e){var r=e+1,n=-90*(F-r);if("skip"==j){if(0==n)var n=0;else if(0>n)var n=-90;else if(n>0)var n=90;if(4==F&&1==r||1==F&&4==r)var n=-1*n}if("repeat"==j){if(!(1!=F&&3!=F&&5!=F||0!=r&&2!=r&&4!=r))var n=90;if(!(0!=F&&2!=F&&4!=F||1!=r&&3!=r&&5!=r))var n=-90}if("negative"==O){var n=-1*n;if(n==-0)var n=0}if(0==n||360==Math.abs(n))var t=20;else if(90==Math.abs(n)||270==Math.abs(n))var t=10;else if(180==Math.abs(n))var t=0;h=h+"\n"+C+" > .turnBoxFaceNum"+r+" {\n"+p(n,r)+" z-index: "+t+";\n}\n",0==M&&"real"==j&&(m=m+"\n"+C+".turnBoxAdjust > .turnBoxFaceNum"+r+" {\n"+p(n,r,!0)+"}\n")})}var w=d+"\n"+B+"\n"+l+"\n"+h+"\n"+m;o(g,w)}var F={width:200,height:50,axis:"X",perspective:800,duration:200,delay:0,easing:"linear",direction:"positive",type:"real"},C=e.extend(F,r),g=this,y=C.width,N=C.height,_=C.even,w=C.perspective,k=C.duration,b=C.easing,T=C.delay,j=C.type,A=C.axis.toUpperCase(),O=C.direction,Y=g.children().length;if(Y>4)var Y=4;if("Y"==A)var E=y;else var E=N;if(void 0==_)var _=E;if(E!==_){var M=!1;if("skip"==j)var j="real"}else var M=!0;if("repeat"!==j&&"skip"!==j)var j="real";if("negative"!==O)var O="positive";B(),m(),h();var S=e(g).find(".turnBoxButtonFor-"+n(e(g).selector));s(g,S,k,T,j,Y,M,O,!1)},e.fn.turnBoxLink=function(n){var t=e(n.box),a=this,i=r(t),o=n.events,u=n.dist;if(void 0==o)var o="click";if(void 0==u)var u="next";var x={events:o,dist:u};s(t,a,i.duration,i.delay,i.type,i.face_pcs,i.fixed,i.direction,x)},e.fn.turnBoxAnimate=function(n){var t={animation:!0,face:1},a=e(this);e.each(a,function(){var a=e(this),i=r(a),o=e.extend(t,n);if(o.face>i.face_pcs)var s=i.face_pcs;else var s=o.face;var x=Math.abs(s-i.current_num),c=o.animation;if("skip"!==i.type&&x>1)var c=!1;u(a,i.current_num,s,i.duration,i.delay,i.type,i.face_pcs,i.fixed,i.direction,c)})}}(jQuery);